<!DOCTYPE html>
<html>
  <head>
    <title>{{title}}</title>
    <link type="text/css" rel="stylesheet" href="bootstrap/css/bootstrap.css"/>
    <link type="text/css" rel="stylesheet" href="/index.css"/>
    <script type="application/javascript" src="/bootstrap/js/bootstrap.js"></script>
  </head>
  <body style="--app-color: {{app.color}}; background-color: var(--app-color);">
    <div class="container">
      <h1>{{app.name}}</h1>
      {{#if session}}
        <h2>Logged in as:</h2>
        <h3>DID: {{session.did}}</h3>
        <h3>Email: {{session.email}}</h3>

        <hr/>
        <form method="post" action="/logout">
          <input type="submit" value="Logout"/>
        </form>
      {{else}}
        <h2>Not Logged in</h2>

        <hr/>
        <h3>Login:</h3>
        <form class="login col-3" method="post" action="/login">
          <div class="mb-3">
            <label for="login-input-email" class="form-label"></label>Email: </label>
            <input id="login-input-email" type="text" name="email" class="form-control"/>
          </div>
          <div class="mb-3">
            <label for="login-input-password" class="form-label"></label>Password: </label>
            <input id="login-input-password" type="password" name="password" class="form-control"/>
          </div>
          <button type="submit" class="btn btn-primary">login</button>
        </form>
      {{/if}}

      <hr/>
      <footer>
        <h5>Other Apps</h5>
        <ul>
          {{#each otherApps}}
            <li>
              <a href="{{url}}">{{name}}</a>
              {{#if ../session}}
                <span> | </span>
                <a href="/send-me-to?app={{name}}">login as {{session.email}}</a>
              {{/if}}
            </li>
          {{/each}}
        </ul>
      </footer>
    </div>
    <script>
      console.log(JSON.stringify({
        zcapActor: {{toJSON app.zcapActor}},
        zcapParentCapability: {{toJSON app.zcapParentCapability}},
      }, null, 2));
    </script>
  </body>
</html>
